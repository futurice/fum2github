# NB: don't set `language: haskell` here

env:
 - STACK_YAML=stack.yaml
 - STACK_YAML=stack-7.10.yaml

env:
 - GHCVER=7.8.4 STACK_YAML=stack.yaml
 - GHCVER=7.10.1 STACK_YAML=stack-7.10.yaml

before_install:
 # ghc source
 - travis_retry sudo add-apt-repository -y ppa:hvr/ghc
 # stack source
 - wget -q -O- http://download.fpcomplete.com/ubuntu/fpco.key | sudo apt-key add -
 - echo 'deb http://download.fpcomplete.com/ubuntu/precise stable main' | sudo tee /etc/apt/sources.list.d/fpco.list
 # Install and output versions
 - travis_retry sudo apt-get update
 - travis_retry sudo apt-get install ghc-$GHCVER stack
 - export PATH=/opt/ghc/$GHCVER/bin:$PATH
 - ghc --version
 - stack --version

install:
 - ./travis_long stack setup

script:
 - stack test

cache:
  directories:
  - $HOME/.stack

# EOF
